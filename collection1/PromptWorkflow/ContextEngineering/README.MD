コンテキストエンジニアリングを行う ワークフロー。
ユーザーの意図を汲み取り、与えられたコンテキストを再帰的に整理し、AIが最大限の効果を発揮する プロンプト を提案し、ユーザーの意図を叶えるコンテキストとプロンプトの完成をサポート。



````

# コンテキストエンジニアリング支援システム

## ワークフロー概要図

```
ユーザー入力
    ↓
[1. 意図解析] ← ────────────┐
    ↓                      │
[2. コンテキスト抽出]         │
    ↓                      │
[3. 構造化・整理]            │ 再帰的
    ↓                      │ フィードバック
[4. プロンプト設計]           │ ループ
    ↓                      │
[5. 検証・改善提案] ─────────┘
    ↓
最終プロンプト + コンテキスト出力
```

---

## プロンプトテンプレート群

### 【テンプレート1】初期意図解析用

```markdown
# ユーザー意図の多層的解析

## あなたの役割
プロンプトエンジニアリングの専門家として、ユーザーの発言から**表層的要求**と**深層的意図**を分離し、真のニーズを特定します。

## 実行内容
以下のユーザー入力を分析してください：

"""
[ユーザーの発言をここに挿入]
"""

### 分析観点
1. **表層的要求**：ユーザーが明示的に述べている内容
2. **深層的意図**：本当に解決したい課題・達成したい目標
3. **制約条件**：明示的/暗黙的な制約（時間・リソース・スキルレベル等）
4. **期待する成果物**：最終的に何が得られればユーザーは満足するか
5. **欠けている情報**：意図を完全に理解するために必要な追加情報

## 出力形式
```
### 分析結果

**表層的要求**
- [箇条書き]

**深層的意図（推定）**
- [箇条書き]

**制約条件**
- [箇条書き]

**期待成果物**
- [箇条書き]

**追加で確認すべき情報**
1. [質問1]
2. [質問2]
```

## 品質基準
- 推測は根拠を明示
- 複数の解釈可能性がある場合は併記
- ユーザーの専門性レベルを考慮
```

---

### 【テンプレート2】コンテキスト抽出・構造化用

```markdown
# コンテキスト情報の体系的整理

## あなたの役割
情報アーキテクトとして、散在するコンテキスト情報を階層的・関連性を持った構造に再編成します。

## 実行内容
以下の情報を分析し、AIが最適に処理できる形式に構造化してください。

### 入力情報
"""
[ユーザーから得られた情報、過去の会話履歴、背景情報などをすべて挿入]
"""

### 構造化の軸
1. **タスクドメイン**：どの専門領域の問題か
2. **時間軸**：過去の経緯・現在の状況・将来の目標
3. **関係者**：誰が関わるか（ユーザー、対象者、協力者等）
4. **リソース**：利用可能な情報・ツール・制約
5. **成功基準**：何が達成されれば成功か

## 出力形式

### 構造化コンテキストマップ
```
【ドメイン】
- 分野：
- 専門レベル：
- 関連技術：

【タイムライン】
- 背景：
- 現状：
- 目標：

【ステークホルダー】
- 主体：
- 対象：
- その他関係者：

【制約とリソース】
- 利用可能：
- 制約：
- 優先順位：

【成功の定義】
- 必須要件：
- 望ましい要件：
- 評価指標：
```

### コンテキスト関連図
[主要要素間の依存関係を図示]

## 品質基準
- 情報の重複を排除
- 階層構造が論理的
- 欠落情報を明示
- AIが参照しやすい形式
```

---

### 【テンプレート3】再帰的プロンプト設計用

```markdown
# 最適化プロンプトの段階的設計

## あなたの役割
プロンプトデザイナーとして、構造化されたコンテキストを基に、段階的に洗練されたプロンプトを設計します。

## 実行内容

### フェーズ1：基本プロンプト生成
以下のコンテキストに基づき、初期プロンプトを3パターン作成してください：

**コンテキスト情報**
```
[テンプレート2の出力を挿入]
```

**パターン指針**
- パターンA：最もシンプルで直接的
- パターンB：構造化された詳細指示型
- パターンC：対話誘導型（段階的に情報を引き出す）

### フェーズ2：比較評価
各パターンについて評価してください：
- 実行可能性（5段階）
- 出力品質予測（5段階）
- 柔軟性・応用性（5段階）
- コンテキスト活用度（5段階）

### フェーズ3：ハイブリッド設計
評価を踏まえ、最適な要素を組み合わせた統合版プロンプトを作成してください。

## 出力形式

### パターンA：シンプル型
```
[プロンプト本文]
```
**評価**：[各項目のスコアとコメント]

### パターンB：構造化型
```
[プロンプト本文]
```
**評価**：[各項目のスコアとコメント]

### パターンC：対話型
```
[プロンプト本文]
```
**評価**：[各項目のスコアとコメント]

### 推奨版：統合プロンプト
```
[最終プロンプト本文]
```

**設計根拠**
- [なぜこの構成を選んだか]
- [各要素の役割]
- [想定される強み/弱み]

## 品質基準
- 各パターンは独立して実行可能
- 評価基準は明確
- 推奨版は実用性を重視
- カスタマイズの余地を残す
```

---

### 【テンプレート4】検証・改善ループ用

```markdown
# プロンプト実行結果の分析と改善

## あなたの役割
品質保証エンジニアとして、プロンプトの実行結果を分析し、改善点を特定します。

## 実行内容

### 入力情報
**使用したプロンプト**
```
[実際に使用したプロンプト]
```

**実行結果**
```
[AIの出力結果]
```

**ユーザーフィードバック**
```
[満足度、不足点、期待とのギャップなど]
```

### 分析タスク
1. **目的達成度評価**：当初の意図をどの程度満たしたか
2. **ギャップ分析**：期待と結果の差異を特定
3. **原因特定**：
   - コンテキスト不足
   - プロンプト構造の問題
   - AIの解釈ミス
   - その他
4. **改善提案**：具体的な修正案を3つ提示

## 出力形式

### 評価サマリー
```
達成度：[0-100%] 
主な成功点：[箇条書き]
主な課題点：[箇条書き]
```

### ギャップ分析
| 期待項目 | 実際の出力 | ギャップ | 重要度 |
|---------|----------|--------|-------|
| [項目1] | [結果1]  | [差異]  | 高/中/低 |

### 原因診断
```
【根本原因】
- [原因1とその根拠]
- [原因2とその根拠]

【影響範囲】
- [どの部分に影響したか]
```

### 改善提案

**提案1：[修正タイプ]**
```
[修正後のプロンプト/コンテキスト]
```
期待効果：[具体的な改善内容]

**提案2：[修正タイプ]**
```
[修正後のプロンプト/コンテキスト]
```
期待効果：[具体的な改善内容]

**提案3：[修正タイプ]**
```
[修正後のプロンプト/コンテキスト]
```
期待効果：[具体的な改善内容]

### 推奨アクション
[次のステップとして何をすべきか]

## 品質基準
- 評価は定量的かつ客観的
- 改善提案は具体的で実装可能
- ユーザーのスキルレベルを考慮
- 再帰的改善のサイクルを促進
```

---

### 【テンプレート5】メタ統合用（全体オーケストレーション）

```markdown
# コンテキストエンジニアリング統合マネージャー

## あなたの役割
プロジェクトマネージャーとして、一連のコンテキストエンジニアリングプロセス全体を統括し、最適な実行経路を提案します。

## 実行内容

### 現状確認
以下の情報を整理してください：

1. **これまでの経緯**
   - どのテンプレートを使用したか
   - 各段階での出力
   - ユーザーからのフィードバック

2. **現在地点**
   - プロセスのどの段階にいるか
   - 達成したこと/未達成なこと
   - 明らかになった新たな要件

3. **目標との距離**
   - 当初の目的との整合性
   - 追加で発生した要件
   - 優先順位の変化

### 実行判断
次のアクションを決定してください：

- **継続**：現在のアプローチで次ステップへ
- **修正**：アプローチを部分修正
- **再設計**：根本から再検討
- **完了**：目的達成により終了

### アクションプラン
選択したアクションに基づき、具体的な実行手順を提示してください。

## 出力形式

### プロセスダッシュボード
```
【進捗状況】
完了：[ステップ1, ステップ2, ...]
現在：[ステップN]
残り：[ステップX, ステップY, ...]

【品質スコア】
意図理解度：[0-100%]
コンテキスト充実度：[0-100%]
プロンプト完成度：[0-100%]
ユーザー満足度：[0-100%]
```

### 推奨アクション
```
【判断】：[継続/修正/再設計/完了]

【理由】
- [根拠1]
- [根拠2]

【次のステップ】
1. [具体的アクション1]
   - 使用テンプレート：[テンプレート名]
   - 期待成果：[何が得られるか]
   - 所要時間：[推定]

2. [具体的アクション2]
   ...
```

### リスクと代替案
```
【想定リスク】
- [リスク1] → [対策]
- [リスク2] → [対策]

【代替アプローチ】
もし現在のアプローチがうまくいかない場合：
- [代替案1]
- [代替案2]
```

## 品質基準
- プロセス全体の一貫性を維持
- ユーザーの負担を最小化
- 柔軟性と効率性のバランス
- 終了条件を明確に定義
```

---

## 使用ガイド

### 基本フロー

**ステップ1：意図解析から開始**
- テンプレート1を使用
- ユーザーの真のニーズを特定
- 不明点があれば質問で補完

**ステップ2：コンテキスト構造化**
- テンプレート2でコンテキストを整理
- 散在する情報を体系化
- AIが処理しやすい形式に変換

**ステップ3：プロンプト設計**
- テンプレート3で複数案を生成
- 各パターンを評価
- 最適な統合版を作成

**ステップ4：実行と検証**
- 実際にプロンプトを試用
- テンプレート4で結果を分析
- 必要に応じてステップ2-3に戻る（再帰）

**ステップ5：全体統括**
- テンプレート5で進捗を確認
- 次のアクションを判断
- 完了または改善サイクルへ

### 活用のコツ

**🔄 再帰的改善**
- 一度で完璧を目指さない
- 小さな改善を積み重ねる
- フィードバックループを重視

**🎯 柔軟な適用**
- すべてのテンプレートを必ず使う必要はない
- 状況に応じてスキップ可能
- テンプレートの部分的使用もOK

**📝 記録の重要性**
- 各段階の出力を保存
- 意思決定の根拠を記録
- 後で振り返れるようにする

**🤝 ユーザーとの対話**
- 一方的に進めない
- 各段階で確認を取る
- 方向性のズレを早期発見

### カスタマイズ例

**簡易版（小規模タスク）**
```
テンプレート1（簡易版）→ テンプレート3（パターンA）→ 完了
```

**標準版（一般的なケース）**
```
テンプレート1 → テンプレート2 → テンプレート3 → テンプレート4（1回）→ 完了
```

**徹底版（複雑なプロジェクト）**
```
テンプレート1 → テンプレート2 → テンプレート3 → テンプレート4 
→ テンプレート5（判断）→ [必要に応じて再帰] → 完了
```

---

## 実装時の注意点

### やるべきこと ✅
- ユーザーの言葉をそのまま受け取るだけでなく、背景を推測
- 各段階で「これで合っていますか?」と確認
- 改善の余地を常に探す
- 過去の会話履歴を活用

### 避けるべきこと ❌
- 完璧主義による分析麻痺
- 過度に複雑なプロンプト設計
- ユーザー不在の独りよがりな改善
- コンテキストの過剰な抽象化

---

## 成功基準チェックリスト

- [ ] ユーザーの真の意図を捉えているか
- [ ] コンテキストは十分に整理されているか
- [ ] プロンプトは実際に実行可能か
- [ ] 出力は期待に沿っているか
- [ ] 改善サイクルが機能しているか
- [ ] ユーザーは満足しているか
- [ ] 再利用・応用可能な形になっているか

---
````



このシステムを使って、**あなたのコンテキストエンジニアリングプロジェクト**を始めましょう！

どのステップから始めたいですか? それとも、具体的な課題を共有いただければ、最適なテンプレートの組み合わせを提案します。

